{% extends "base.html" %}
{% block content %}
  {% set players = game['players'] %}
  <h2>Month {{ game['month'] }} {% if game['month'] <= 12 %}/ 12{% endif %}</h2>
  
  {% if game['mode'] == 'multi' and game['month'] <= 12 %}
    <h4>Current Turn: {{ players[game['current_player']]['name'] }}</h4>
  {% elif game['mode'] == 'solo' and game['month'] <= 12 %}
    <h4>Current Turn: {{ players[0]['name'] }}</h4>
  {% endif %}
  
  <!-- Table of all player stats -->
  <table class="table table-sm table-bordered align-middle my-3">
    <thead class="table-light">
      <tr>
        <th>Player</th><th>Money</th><th>Customers</th><th>Employees</th><th>Product Quality</th><th>Reputation</th>
      </tr>
    </thead>
    <tbody>
      {% for p in players %}
      <tr>
        <td>{{ p.name }}</td>
        <td>${{ p.money }}</td>
        <td>{{ p.customers }}</td>
        <td>{{ p.employees }}</td>
        <td>{{ p.product }}</td>
        <td>{{ p.reputation }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  
  {% if game['month'] <= 12 %}
    <!-- Action choice form -->
    <form action="{{ url_for('game') }}" method="post" class="mb-4">
      <div class="mb-2"><strong>Choose an action:</strong></div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="action" id="act1" value="marketing" required>
        <label class="form-check-label" for="act1">📢 Marketing (spend money to gain customers)</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="action" id="act2" value="product" required>
        <label class="form-check-label" for="act2">🛠️ Product Development (improve product quality)</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="action" id="act3" value="hiring" required>
        <label class="form-check-label" for="act3">🤝 Hiring (increase employees, raises costs)</label>
      </div>
      <div class="form-check">
        <input class="form-check-input" type="radio" name="action" id="act4" value="nothing" required>
        <label class="form-check-label" for="act4">🌀 Do Nothing (no new investment)</label>
      </div>
      <button type="submit" class="btn btn-primary mt-2">Confirm Action</button>
    </form>
  {% endif %}
  
  <!-- Event history log -->
  <h5>History:</h5>
  <ul class="list-unstyled">
    {% for entry in game['history'] %}
      <li>{{ entry|safe }}</li>
    {% endfor %}
  </ul>
{% endblock %}

